<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Heibai&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="heibai.site/"/>
  <updated>2018-12-05T14:04:48.717Z</updated>
  <id>heibai.site/</id>
  
  <author>
    <name>heibai</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Centos7编译安装MySql5.7</title>
    <link href="heibai.site/2018/10/19/Centos7%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85MySql5-7/"/>
    <id>heibai.site/2018/10/19/Centos7编译安装MySql5-7/</id>
    <published>2018-10-19T13:50:09.000Z</published>
    <updated>2018-12-05T14:04:48.717Z</updated>
    
    <content type="html"><![CDATA[<h5 id="查看系统版本"><a href="#查看系统版本" class="headerlink" title="查看系统版本"></a>查看系统版本</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/centos-release</span><br><span class="line">CentOS Linux release 7.5.1804 (Core)</span><br></pre></td></tr></table></figure><h5 id="安装所需依赖"><a href="#安装所需依赖" class="headerlink" title="安装所需依赖"></a>安装所需依赖</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc cmake make gcc-c++ ncurses-devel openssl-devel bison ncurses chkconfig lsof</span><br></pre></td></tr></table></figure><a id="more"></a><h5 id="卸载系统自带Mariadb及删除遗留的配置文件"><a href="#卸载系统自带Mariadb及删除遗留的配置文件" class="headerlink" title="卸载系统自带Mariadb及删除遗留的配置文件"></a>卸载系统自带Mariadb及删除遗留的配置文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#查看centos 默认安装的mariadb </span></span><br><span class="line">[root@VM_0_15_centos ~]<span class="comment"># rpm -qa | grep mariadb</span></span><br><span class="line">mariadb-libs-5.5.56-2.el7.x86_64</span><br><span class="line"><span class="comment"># 强制卸载mariadb</span></span><br><span class="line">rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64</span><br><span class="line"><span class="comment">#删除对应的mariadb配置文件</span></span><br><span class="line">rm -rf /etc/my.cnf</span><br></pre></td></tr></table></figure><h5 id="下载MySql文件"><a href="#下载MySql文件" class="headerlink" title="下载MySql文件"></a>下载MySql文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#进入到/usr/local/src</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src</span><br><span class="line"><span class="comment">#下载文件（因mysql5.7之后必须要安装boost库，所以这里直接下载带boost的mysql源码）</span></span><br><span class="line">wget https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-boost-5.7.23.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#下载成功</span></span><br><span class="line">wget https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-boost-5.7.23.tar.gz</span><br><span class="line">--2018-10-19 22:46:26--  https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-boost-5.7.23.tar.gz</span><br><span class="line">Resolving cdn.mysql.com (cdn.mysql.com)... 23.56.25.233</span><br><span class="line">Connecting to cdn.mysql.com (cdn.mysql.com)|23.56.25.233|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 49025014 (47M) [application/x-tar-gz]</span><br><span class="line">Saving to: ‘mysql-boost-5.7.23.tar.gz’</span><br><span class="line"></span><br><span class="line">100%[==============================================================================================&gt;] 49,025,014   523KB/s   <span class="keyword">in</span> 64s    </span><br><span class="line"></span><br><span class="line">2018-10-19 22:47:47 (747 KB/s) - ‘mysql-boost-5.7.23.tar.gz’ saved [49025014/49025014]</span><br><span class="line"></span><br><span class="line"><span class="comment">#解压文件</span></span><br><span class="line">tar zxvf mysql-boost-5.7.23.tar.gz</span><br><span class="line"><span class="comment">#进入目录</span></span><br><span class="line"><span class="built_in">cd</span> mysql-5.7.23</span><br><span class="line"><span class="comment">#编译参数</span></span><br><span class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr/<span class="built_in">local</span>/mysql -DMYSQL_DATADIR=/usr/<span class="built_in">local</span>/mysql/data -DSYSCONFDIR=/etc -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DWITH_ARCHIVE_STORAGE_ENGINE=1 -DWITH_MEMORY_STORAGE_ENGINE=1 -DWITH_READLINE=1 -DMYSQL_UNIX_ADDR=/usr/<span class="built_in">local</span>/mysql/mysql.sock -DMYSQL_TCP_PORT=3306 -DENABLED_LOCAL_INFILE=1 -DENABLE_DOWNLOADS=1 -DWITH_PARTITION_STORAGE_ENGINE=1 -DEXTRA_CHARSETS=all -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DWITH_DEBUG=0 -DMYSQL_MAINTAINER_MODE=0 -DWITH_SSL:STRING=bundled -DWITH_ZLIB:STRING=bundled -DWITH_BOOST=boost</span><br><span class="line"></span><br><span class="line"><span class="comment">#初始化完成</span></span><br><span class="line"></span><br><span class="line">-- CMAKE_BUILD_TYPE: RelWithDebInfo</span><br><span class="line">-- COMPILE_DEFINITIONS: _GNU_SOURCE;_FILE_OFFSET_BITS=64;HAVE_CONFIG_H;HAVE_LIBEVENT1</span><br><span class="line">-- CMAKE_C_FLAGS:  -Wall -Wextra -Wformat-security -Wvla -Wwrite-strings -Wdeclaration-after-statement</span><br><span class="line">-- CMAKE_CXX_FLAGS:  -Wall -Wextra -Wformat-security -Wvla -Woverloaded-virtual -Wno-unused-parameter</span><br><span class="line">-- CMAKE_C_LINK_FLAGS: </span><br><span class="line">-- CMAKE_CXX_LINK_FLAGS: </span><br><span class="line">-- CMAKE_C_FLAGS_RELWITHDEBINFO: -O3 -g -fabi-version=2 -fno-omit-frame-pointer -fno-strict-aliasing -DDBUG_OFF</span><br><span class="line">-- CMAKE_CXX_FLAGS_RELWITHDEBINFO: -O3 -g -fabi-version=2 -fno-omit-frame-pointer -fno-strict-aliasing -DDBUG_OFF</span><br><span class="line">-- Configuring <span class="keyword">done</span></span><br><span class="line">-- Generating <span class="keyword">done</span></span><br><span class="line">-- Build files have been written to: /usr/<span class="built_in">local</span>/src/mysql-5.7.23</span><br></pre></td></tr></table></figure><h5 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h5 id="添加mysql用户和用户组"><a href="#添加mysql用户和用户组" class="headerlink" title="添加mysql用户和用户组"></a>添加mysql用户和用户组</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd mysql -g mysql -M -s /sbin/nologin</span><br></pre></td></tr></table></figure><h5 id="给mysql用户授权mysql-文件夹"><a href="#给mysql用户授权mysql-文件夹" class="headerlink" title="给mysql用户授权mysql 文件夹"></a>给mysql用户授权mysql 文件夹</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R mysql:mysql /usr/<span class="built_in">local</span>/mysql/</span><br></pre></td></tr></table></figure><h5 id="拷贝启动文件"><a href="#拷贝启动文件" class="headerlink" title="拷贝启动文件"></a>拷贝启动文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/<span class="built_in">local</span>/mysql/support-files/mysql.server /etc/init.d/</span><br></pre></td></tr></table></figure><h5 id="启动MySql"><a href="#启动MySql" class="headerlink" title="启动MySql"></a>启动MySql</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">启动MySql</span></span><br><span class="line">/etc/init.d/mysql.server start</span><br><span class="line">Starting MySQL.Logging to '/usr/local/mysql/data/VM_0_15_centos.err'.</span><br><span class="line">SUCCESS!</span><br></pre></td></tr></table></figure><h5 id="初始化数据库"><a href="#初始化数据库" class="headerlink" title="初始化数据库"></a>初始化数据库</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用-initialize会生成随机密码，使用-initialize-insecure生成空密码，这里选择生成空密码。</span></span><br><span class="line">/usr/<span class="built_in">local</span>/mysql/bin/mysqld --initialize-insecure --user=mysql</span><br></pre></td></tr></table></figure><h5 id="添加至环境变量"><a href="#添加至环境变量" class="headerlink" title="添加至环境变量"></a>添加至环境变量</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">使其永久生效，把安装目录添加至环境变量</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="bash">文件最后一行添加进去</span></span><br><span class="line">export PATH=$PATH:/usr/local/mysql/bin</span><br><span class="line"><span class="meta">#</span><span class="bash">马上生效</span></span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><h5 id="登陆mysql"><a href="#登陆mysql" class="headerlink" title="登陆mysql"></a>登陆mysql</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure><h5 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看数据库</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> show databases;</span></span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"><span class="meta">#</span><span class="bash">修改root密码为123456</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> <span class="built_in">set</span> password <span class="keyword">for</span> root@localhost = password(<span class="string">'123456'</span>);</span></span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"><span class="meta">#</span><span class="bash">退出mysql，重新登陆生效</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> <span class="built_in">exit</span></span></span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><p>注意事项：</p><p>​                MySql5.7.18之后版本不再提供my.cnf 配置文件</p><p>​           </p>]]></content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;查看系统版本&quot;&gt;&lt;a href=&quot;#查看系统版本&quot; class=&quot;headerlink&quot; title=&quot;查看系统版本&quot;&gt;&lt;/a&gt;查看系统版本&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat /etc/centos-release&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CentOS Linux release 7.5.1804 (Core)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;安装所需依赖&quot;&gt;&lt;a href=&quot;#安装所需依赖&quot; class=&quot;headerlink&quot; title=&quot;安装所需依赖&quot;&gt;&lt;/a&gt;安装所需依赖&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum -y install gcc cmake make gcc-c++ ncurses-devel openssl-devel bison ncurses chkconfig lsof&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="MySql" scheme="heibai.site/categories/MySql/"/>
    
    
      <category term="MySql" scheme="heibai.site/tags/MySql/"/>
    
  </entry>
  
  <entry>
    <title>MySql保留最近5天备份</title>
    <link href="heibai.site/2018/09/16/MySql%E4%BF%9D%E7%95%99%E6%9C%80%E8%BF%915%E5%A4%A9%E5%A4%87%E4%BB%BD/"/>
    <id>heibai.site/2018/09/16/MySql保留最近5天备份/</id>
    <published>2018-09-16T07:15:43.000Z</published>
    <updated>2018-12-03T15:54:27.130Z</updated>
    
    <content type="html"><![CDATA[<h4 id="进入备份目录"><a href="#进入备份目录" class="headerlink" title="进入备份目录"></a>进入备份目录</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /mysqlbackup</span><br></pre></td></tr></table></figure><h4 id="编写shell脚本"><a href="#编写shell脚本" class="headerlink" title="编写shell脚本"></a>编写shell脚本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi clean.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">find /mysqlbackup  -mtime +4  -name "*.sql" -exec rm -rf &#123;&#125; \;</span><br></pre></td></tr></table></figure><a id="more"></a><p>删除该目录下5天以前的以sql后缀结尾的文件</p><h4 id="添加执行权限"><a href="#添加执行权限" class="headerlink" title="添加执行权限"></a>添加执行权限</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 clean.sh</span><br></pre></td></tr></table></figure><h4 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a>定时任务</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line">0 6 * * * /backup.sh</span><br></pre></td></tr></table></figure><p>每天凌晨6点执行一次</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;进入备份目录&quot;&gt;&lt;a href=&quot;#进入备份目录&quot; class=&quot;headerlink&quot; title=&quot;进入备份目录&quot;&gt;&lt;/a&gt;进入备份目录&lt;/h4&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd /mysqlbackup&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;编写shell脚本&quot;&gt;&lt;a href=&quot;#编写shell脚本&quot; class=&quot;headerlink&quot; title=&quot;编写shell脚本&quot;&gt;&lt;/a&gt;编写shell脚本&lt;/h4&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vi clean.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt;!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;find /mysqlbackup  -mtime +4  -name &quot;*.sql&quot; -exec rm -rf &amp;#123;&amp;#125; \;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="MySql" scheme="heibai.site/categories/MySql/"/>
    
    
      <category term="MySql" scheme="heibai.site/tags/MySql/"/>
    
  </entry>
  
  <entry>
    <title>MySql数据库每天定时自动备份</title>
    <link href="heibai.site/2018/09/16/MySql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AF%8F%E5%A4%A9%E5%AE%9A%E6%97%B6%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD/"/>
    <id>heibai.site/2018/09/16/MySql数据库每天定时自动备份/</id>
    <published>2018-09-16T02:03:08.000Z</published>
    <updated>2018-12-03T15:54:46.944Z</updated>
    
    <content type="html"><![CDATA[<h4 id="创建备份目录"><a href="#创建备份目录" class="headerlink" title="创建备份目录"></a>创建备份目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mysqlbackup</span><br><span class="line"><span class="built_in">cd</span> /mysqlbackup</span><br></pre></td></tr></table></figure><h4 id="编写shell脚本"><a href="#编写shell脚本" class="headerlink" title="编写shell脚本"></a>编写shell脚本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi backup.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">dd=$(date +"%Y-%m-%d")</span><br><span class="line">usr/local/mysql/bin/mysqldump -uusername -ppassword databasename &gt;/mysqlbackup/$dd-databasename.sql;</span><br></pre></td></tr></table></figure><a id="more"></a><p>注意：</p><p>1.mysqldump路径需要写绝对路径，直接执行命令，备份能够成功，但是脚本里面不写绝对路径，备份出来的会是空文件；</p><p>2.username替换为用户名，一般为root；</p><p>3.password为密码；</p><p>4.databasename为要备份的数据库名称。</p><h4 id="添加执行权限"><a href="#添加执行权限" class="headerlink" title="添加执行权限"></a>添加执行权限</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 backup.sh</span><br></pre></td></tr></table></figure><h4 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a>定时任务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line">0 5 * * * /backup.sh</span><br></pre></td></tr></table></figure><p>表示每天凌晨5点自动执行这个脚本，完成备份。</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;创建备份目录&quot;&gt;&lt;a href=&quot;#创建备份目录&quot; class=&quot;headerlink&quot; title=&quot;创建备份目录&quot;&gt;&lt;/a&gt;创建备份目录&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkdir /mysqlbackup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /mysqlbackup&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;编写shell脚本&quot;&gt;&lt;a href=&quot;#编写shell脚本&quot; class=&quot;headerlink&quot; title=&quot;编写shell脚本&quot;&gt;&lt;/a&gt;编写shell脚本&lt;/h4&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vi backup.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt;!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd=$(date +&quot;%Y-%m-%d&quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;usr/local/mysql/bin/mysqldump -uusername -ppassword databasename &amp;gt;/mysqlbackup/$dd-databasename.sql;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="MySql" scheme="heibai.site/categories/MySql/"/>
    
    
      <category term="MySql" scheme="heibai.site/tags/MySql/"/>
    
  </entry>
  
  <entry>
    <title>同步Android源码清除缓存</title>
    <link href="heibai.site/2018/04/14/%E5%90%8C%E6%AD%A5Android%E6%BA%90%E7%A0%81%E6%B8%85%E9%99%A4%E7%BC%93%E5%AD%98/"/>
    <id>heibai.site/2018/04/14/同步Android源码清除缓存/</id>
    <published>2018-04-14T03:03:58.000Z</published>
    <updated>2018-12-03T15:55:48.945Z</updated>
    
    <content type="html"><![CDATA[<h4 id="同步Android源码清除缓存："><a href="#同步Android源码清除缓存：" class="headerlink" title="同步Android源码清除缓存："></a>同步Android源码清除缓存：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find .repo/ -name <span class="string">"*tmp_pack*"</span> | xargs rm -rvf</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;同步Android源码清除缓存：&quot;&gt;&lt;a href=&quot;#同步Android源码清除缓存：&quot; class=&quot;headerlink&quot; title=&quot;同步Android源码清除缓存：&quot;&gt;&lt;/a&gt;同步Android源码清除缓存：&lt;/h4&gt;&lt;figure class=&quot;hi
      
    
    </summary>
    
      <category term="Linux" scheme="heibai.site/categories/Linux/"/>
    
    
      <category term="Android" scheme="heibai.site/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Windows 修改远程端口号</title>
    <link href="heibai.site/2018/04/14/Windows-%E4%BF%AE%E6%94%B9%E8%BF%9C%E7%A8%8B%E7%AB%AF%E5%8F%A3%E5%8F%B7/"/>
    <id>heibai.site/2018/04/14/Windows-修改远程端口号/</id>
    <published>2018-04-14T02:47:58.000Z</published>
    <updated>2018-12-03T15:56:14.178Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Win-R-运行regedit-注册表"><a href="#Win-R-运行regedit-注册表" class="headerlink" title="Win+R 运行regedit(注册表)"></a>Win+R 运行regedit(注册表)</h4><p>点击HKEY_LOCAL_MACHINE/SYSTEM/CurrentConrtolset/Control/Terminal Server/Wds/rdpwd/Tds/tcp portNumber(远程端口号，默认3389)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;Win-R-运行regedit-注册表&quot;&gt;&lt;a href=&quot;#Win-R-运行regedit-注册表&quot; class=&quot;headerlink&quot; title=&quot;Win+R 运行regedit(注册表)&quot;&gt;&lt;/a&gt;Win+R 运行regedit(注册表)&lt;/h4&gt;&lt;p&gt;
      
    
    </summary>
    
      <category term="Windows" scheme="heibai.site/categories/Windows/"/>
    
    
      <category term="Windows" scheme="heibai.site/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Linux防火墙</title>
    <link href="heibai.site/2018/04/14/Linux%E9%98%B2%E7%81%AB%E5%A2%99/"/>
    <id>heibai.site/2018/04/14/Linux防火墙/</id>
    <published>2018-04-14T02:05:39.000Z</published>
    <updated>2018-12-04T01:16:49.936Z</updated>
    
    <content type="html"><![CDATA[<h4 id="centos7"><a href="#centos7" class="headerlink" title="centos7"></a>centos7</h4><h4 id="通过防火墙"><a href="#通过防火墙" class="headerlink" title="通过防火墙"></a>通过防火墙</h4><p>80端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br></pre></td></tr></table></figure><p>443端口<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=443/tcp --permanent</span><br></pre></td></tr></table></figure></p><a id="more"></a><h4 id="重启防火墙"><a href="#重启防火墙" class="headerlink" title="重启防火墙"></a>重启防火墙</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service</span><br></pre></td></tr></table></figure><h4 id="centos6"><a href="#centos6" class="headerlink" title="centos6"></a>centos6</h4><p>查询防火墙状态:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service   iptables status</span><br></pre></td></tr></table></figure><p>停止防火墙:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service   iptables stop</span><br></pre></td></tr></table></figure></p><p>启动防火墙:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service   iptables start</span><br></pre></td></tr></table></figure></p><p>重启防火墙:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service   iptables restart</span><br></pre></td></tr></table></figure></p><p>永久关闭防火墙:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig   iptables off</span><br></pre></td></tr></table></figure></p><p>永久关闭后启用:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig   iptables on</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;centos7&quot;&gt;&lt;a href=&quot;#centos7&quot; class=&quot;headerlink&quot; title=&quot;centos7&quot;&gt;&lt;/a&gt;centos7&lt;/h4&gt;&lt;h4 id=&quot;通过防火墙&quot;&gt;&lt;a href=&quot;#通过防火墙&quot; class=&quot;headerlink&quot; title=&quot;通过防火墙&quot;&gt;&lt;/a&gt;通过防火墙&lt;/h4&gt;&lt;p&gt;80端口&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;firewall-cmd --zone=public --add-port=80/tcp --permanent&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;443端口&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;firewall-cmd --zone=public --add-port=443/tcp --permanent&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="heibai.site/categories/Linux/"/>
    
    
      <category term="Linux" scheme="heibai.site/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Hello World!</title>
    <link href="heibai.site/2018/04/11/Hello-World-0/"/>
    <id>heibai.site/2018/04/11/Hello-World-0/</id>
    <published>2018-04-11T14:21:19.000Z</published>
    <updated>2018-04-11T14:21:19.790Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
</feed>
