<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Shell脚本一键编译安装Mysql</title>
      <link href="/2019/03/27/Shell%E8%84%9A%E6%9C%AC%E4%B8%80%E9%94%AE%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85Mysql/"/>
      <url>/2019/03/27/Shell%E8%84%9A%E6%9C%AC%E4%B8%80%E9%94%AE%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85Mysql/</url>
      
        <content type="html"><![CDATA[<p>因工作量越来越大，使用shell脚本能够提高我们的工作效率并节省时间，让运维工作自动化，所以分享一下mysql一键编译安装的脚本</p><a id="more"></a><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> !/bin/bash  </span></span><br><span class="line">GROUP=mysql  </span><br><span class="line">USER=mysql  </span><br><span class="line">MYSQL_HOME=/usr/local/mysql  </span><br><span class="line">MYSQL_DATA_HOME=/data/mysql    </span><br><span class="line">D_VERSION="mysql-boost-5.7.25"</span><br><span class="line">MYSQL_VERSION="mysql-5.7.25"  </span><br><span class="line">DOWNLOAD_PATH="/usr/local/src"   </span><br><span class="line">echo "=================================start install mysql==================================="</span><br><span class="line">if [ $(id -u) != "0" ];then  </span><br><span class="line">   echo "Error: You must be root to run this script!"  </span><br><span class="line">   exit 1  </span><br><span class="line">fi  </span><br><span class="line"></span><br><span class="line">if [ -z $(cat /etc/group|awk -F: '&#123;print $1&#125;'| grep -w "$GROUP") ]  </span><br><span class="line">then  </span><br><span class="line">  groupadd  $GROUP  </span><br><span class="line">    if(( $? == 0 ))  </span><br><span class="line">      then  </span><br><span class="line">         echo "group $GROUP add sucessfully!"  </span><br><span class="line">    fi     </span><br><span class="line">else  </span><br><span class="line">  echo "$GROUP is exsits"  </span><br><span class="line">fi  </span><br><span class="line"></span><br><span class="line">if [ -z $(cat /etc/passwd|awk -F: '&#123;print $1&#125;'| grep -w "$USER") ]  </span><br><span class="line">then  </span><br><span class="line">  adduser -g $GROUP $USER  </span><br><span class="line">     if (( $? == 0 ))  </span><br><span class="line">       then  </span><br><span class="line">       echo "user $USER add sucessfully!"  </span><br><span class="line">     fi  </span><br><span class="line">else  </span><br><span class="line">  echo "$USER is exsits"  </span><br><span class="line">fi   </span><br><span class="line">for i in make gcc-c++ bison-devel  ncurses-devel  perl perl-devel wget cmake bzip2 bzip2-devel bzip2-libs python-devel</span><br><span class="line">do    </span><br><span class="line">         yum -y install $i   </span><br><span class="line">done  &gt;/dev/null </span><br><span class="line">echo "==================================downloading mysql===================================="</span><br><span class="line"> rm -rf $&#123;DOWNLOAD_PATH&#125;/mysql*  </span><br><span class="line"> wget https://cdn.mysql.com//Downloads/MySQL-5.7/$&#123;D_VERSION&#125;.tar.gz -P $&#123;DOWNLOAD_PATH&#125;   &gt;/dev/null</span><br><span class="line">     if(( $? == 0 ))  </span><br><span class="line">       then   </span><br><span class="line">        echo "MySQL DownLoad sucessfully!"   </span><br><span class="line">       else   </span><br><span class="line">        echo "MySQL DownLoad failed!"  </span><br><span class="line">        exit 1 </span><br><span class="line">     fi  </span><br><span class="line">cd $&#123;DOWNLOAD_PATH&#125; </span><br><span class="line">echo "=================================unpackaging mysql====================================="</span><br><span class="line">tar xzvf $&#123;D_VERSION&#125;.tar.gz  &gt;/dev/null</span><br><span class="line">cd $&#123;MYSQL_VERSION&#125;  </span><br><span class="line">if [ -s /etc/my.cnf ]; then  </span><br><span class="line">        mv /etc/my.cnf /etc/my.cnf.`date +%Y%m%d%H%M%S`.bak  </span><br><span class="line">fi  </span><br><span class="line">echo "==========================configuring mysql,please wait================================"</span><br><span class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr/local/mysql \</span><br><span class="line"> -DMYSQL_DATADIR=/data/mysql \</span><br><span class="line"> -DSYSCONFDIR=/etc \</span><br><span class="line"> -DWITH_MYISAM_STORAGE_ENGINE=1 \</span><br><span class="line"> -DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line"> -DWITH_ARCHIVE_STORAGE_ENGINE=1 \</span><br><span class="line"> -DWITH_MEMORY_STORAGE_ENGINE=1 \</span><br><span class="line"> -DWITH_READLINE=1 \</span><br><span class="line"> -DMYSQL_UNIX_ADDR=/usr/local/mysql/mysql.sock \</span><br><span class="line"> -DMYSQL_TCP_PORT=3306 \</span><br><span class="line"> -DENABLED_LOCAL_INFILE=1 \</span><br><span class="line"> -DENABLE_DOWNLOADS=1 \</span><br><span class="line"> -DWITH_PARTITION_STORAGE_ENGINE=1 \</span><br><span class="line"> -DEXTRA_CHARSETS=all \</span><br><span class="line"> -DDEFAULT_CHARSET=utf8 \</span><br><span class="line"> -DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line"> -DWITH_DEBUG=0 \</span><br><span class="line"> -DMYSQL_MAINTAINER_MODE=0 \</span><br><span class="line"> -DWITH_SSL:STRING=bundled \</span><br><span class="line"> -DWITH_ZLIB:STRING=bundled \</span><br><span class="line"> -DWITH_BOOST=boost &gt;/dev/null</span><br><span class="line">echo "==========================make mysql, pleas,please wait================================"</span><br><span class="line">make  &amp;&amp; make install </span><br><span class="line">if [ $? -ne 0 ];then</span><br><span class="line">echo "make failed ,please check it out!"</span><br><span class="line">exit 1</span><br><span class="line">fi</span><br><span class="line"><span class="meta">$</span><span class="bash">MYSQL_HOME/bin/mysqld --initialize-insecure --user=<span class="variable">$USER</span></span></span><br><span class="line">mkdir -p "$&#123;MYSQL_DATA_HOME&#125;"</span><br><span class="line">chown -R mysql:mysql $MYSQL_HOME</span><br><span class="line">chown -R mysql:mysql $MYSQL_DATA_HOME</span><br><span class="line">cp $MYSQL_HOME/support-files/mysql.server /etc/init.d/mysql</span><br><span class="line">echo "export PATH=$PATH:/usr/local/mysql/bin/" &gt;&gt;/etc/profile</span><br><span class="line">ln -s /usr/local/mysql/bin/mysql</span><br><span class="line">source /etc/profile</span><br><span class="line">echo "==========================Mysql installation completed================================"</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure><p>注意事项：</p><p>​                1.因5.7.18以后的版本不需要my.cnf也能启动mysql，脚本没写入mysql配置文件，如果需要，自行添加</p><p>​                2.mysql 密码默认为空</p>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shell </tag>
            
            <tag> 脚本 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins+Git+Maven持续集成</title>
      <link href="/2019/03/24/Jenkins-Git-Maven%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
      <url>/2019/03/24/Jenkins-Git-Maven%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/</url>
      
        <content type="html"><![CDATA[<h4 id="什么叫可持续集成"><a href="#什么叫可持续集成" class="headerlink" title="什么叫可持续集成"></a>什么叫可持续集成</h4><p>​         持续集成是一种软件开发实践，即团队开发成员经常集成他们的工作，通常每个成员每天至少集成一次，也就意味着每天可能会发生多次集成。每次集成都通过自动化的构建（包括编译，发布，自动化测试）来验证，从而尽早地发现集成错误。</p><h4 id="jenkins简介"><a href="#jenkins简介" class="headerlink" title="jenkins简介"></a>jenkins简介</h4><p>​         Jenkins是一个开源软件项目，是基于Java开发的一种<a href="https://baike.baidu.com/item/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/6250744" target="_blank" rel="noopener">持续集成</a>工具，用于监控持续重复的工作，旨在提供一个开放易用的软件平台，使软件的持续集成变成可能。</p><h4 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h4><h5 id="系统环境"><a href="#系统环境" class="headerlink" title="系统环境"></a>系统环境</h5><a id="more"></a><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_15_centos ~]# cat /etc/centos-release</span><br><span class="line">CentOS Linux release 7.5.1804 (Core)</span><br></pre></td></tr></table></figure><h5 id="安装jdk"><a href="#安装jdk" class="headerlink" title="安装jdk"></a>安装jdk</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入/usr/<span class="built_in">local</span>/src目录</span></span><br><span class="line">cd /usr/local/src</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">上传jdk文件并解压</span></span><br><span class="line">tar zxvf jdk-8u201-linux-x64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">拷贝</span></span><br><span class="line">cp -R jdk1.8.0_201/   /usr/local/jdk1.8</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">配置环境变量 </span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="bash">并在profile最后添加以下内容</span></span><br><span class="line">JAVA_HOME=/usr/local/jdk1.8</span><br><span class="line">CLASSPATH=.:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar</span><br><span class="line">PATH=$JAVA_HOME/bin:$HOME/bin:$HOME/.local/bin:$PATH</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">初始化环境变量</span></span><br><span class="line">source /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看java 版本</span></span><br><span class="line">java -version</span><br><span class="line"></span><br><span class="line">java version "1.8.0_201"</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_201-b09)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.201-b09, mixed mode)</span><br></pre></td></tr></table></figure><h5 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum  -y install git</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看git 版本</span></span><br><span class="line">git --version</span><br></pre></td></tr></table></figure><h5 id="安装maven"><a href="#安装maven" class="headerlink" title="安装maven"></a>安装maven</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入/usr/<span class="built_in">local</span>/src目录</span></span><br><span class="line">cd /usr/local/src</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">上传jdk文件并解压</span></span><br><span class="line">tar zxvf apache-maven-3.6.0-bin.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">拷贝</span></span><br><span class="line">cp -R apache-maven-3.6.0/   /usr/local/maven</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">配置环境变量 </span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="bash">并在profile最后添加以下内容</span></span><br><span class="line">MAVEN_HOME=/usr/local/maven</span><br><span class="line">PATH=$&#123;PATH&#125;:$&#123;MAVEN_HOME&#125;/bin</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">初始化环境变量</span></span><br><span class="line">source /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看maven版本</span></span><br><span class="line">mvn -v</span><br></pre></td></tr></table></figure><h5 id="安装tomcat"><a href="#安装tomcat" class="headerlink" title="安装tomcat"></a>安装tomcat</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入/usr/<span class="built_in">local</span>/src目录</span></span><br><span class="line">cd /usr/local/src</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">上传jdk文件并解压</span></span><br><span class="line">tar zxvf apache-tomcat-8.5.39.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">拷贝</span></span><br><span class="line">cp -R apache-tomcat-8.5.39/   /usr/local/tomcat</span><br></pre></td></tr></table></figure><h5 id="添加tomcat为服务"><a href="#添加tomcat为服务" class="headerlink" title="添加tomcat为服务"></a>添加tomcat为服务</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">新建tomcat启动文件</span></span><br><span class="line">vim /etc/init.d/tomcat</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> description: Tomcat8 Start Stop Restart</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> processname: tomcat8</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig: 234 20 80</span></span><br><span class="line"></span><br><span class="line">CATALINA_HOME=/usr/local/tomcat</span><br><span class="line">export JAVA_HOME=/usr/local/jdk1.8</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">        start)</span><br><span class="line">                sh $CATALINA_HOME/bin/startup.sh</span><br><span class="line">                ;;</span><br><span class="line">        stop)</span><br><span class="line">                sh $CATALINA_HOME/bin/shutdown.sh</span><br><span class="line">                ;;</span><br><span class="line">        restart)</span><br><span class="line">                sh $CATALINA_HOME/bin/shutdown.sh</span><br><span class="line">                sh $CATALINA_HOME/bin/startup.sh</span><br><span class="line">                ;;</span><br><span class="line">        *)</span><br><span class="line">                echo 'please use : tomcat &#123;start | stop | restart&#125;'</span><br><span class="line">        ;;  </span><br><span class="line">esac        </span><br><span class="line">exit 0 </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">添加执行权限</span></span><br><span class="line">chmod 755 /etc/init.d/tomcat</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">添加为系统服务</span></span><br><span class="line">chkconfig --add tomcat</span><br><span class="line"><span class="meta">#</span><span class="bash">现在可以用service tomcat stop |start|restart 来管理tomcat了</span></span><br></pre></td></tr></table></figure><h5 id="安装jenkins"><a href="#安装jenkins" class="headerlink" title="安装jenkins"></a>安装jenkins</h5><p>因机器内存不足的原因，这里jenkins 使用rpm包安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入到src目录并上传rpm包</span></span><br><span class="line">cd /usr/local/src</span><br><span class="line"><span class="meta">#</span><span class="bash">开始安装</span></span><br><span class="line">rpm -ih jenkins-2.168-1.1.noarch.rpm</span><br></pre></td></tr></table></figure><p> 因jenkins 默认使用8080端口，和tomcat占用的端口有冲突，故更改一下jenkins的默认端口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/jenkins</span><br></pre></td></tr></table></figure><p> <img src="http://pourfpqe4.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20190324133442.png" alt></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/init.d/jenkins</span><br></pre></td></tr></table></figure><p>因rpm安装的jenkins 默认的jdk与安装的jdk路径不一样，会报错，启动不起来，故需要更改一下配置</p><p><img src="http://pourfpqe4.bkt.clouddn.com/YSH11DRH%7DQT0I1_0%25NTKYTY.png" alt></p><h4 id="jenkins初始化"><a href="#jenkins初始化" class="headerlink" title="jenkins初始化"></a>jenkins初始化</h4><p>浏览器打开你的地址 ip+端口，复制密码到输入框</p><p><img src="http://pourfpqe4.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20190324133843.png" alt="jenkins密码"></p><h4 id="jenkins插件安装"><a href="#jenkins插件安装" class="headerlink" title="jenkins插件安装"></a>jenkins插件安装</h4><p>这里选择安装推荐的默认插件</p><p><img src="http://pourfpqe4.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20190324134149.png" alt></p><p>创建管理员账号</p><p><img src="http://pourfpqe4.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20190324134636.png" alt></p><p>安装 maven 插件，找到 “系统管理“ - “安装插件” ，点击 “可选插件”，找到如下maven插件的版本（Maven Integration）</p><p><img src="http://pourfpqe4.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20190324135304.png" alt></p><h5 id="jenkins配置"><a href="#jenkins配置" class="headerlink" title="jenkins配置"></a>jenkins配置</h5><p><img src="http://pourfpqe4.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20190324140147.png" alt></p><p><img src="http://pourfpqe4.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20190324140326.png" alt></p><p>配置完并保存</p><h4 id="jenkins创建项目"><a href="#jenkins创建项目" class="headerlink" title="jenkins创建项目"></a>jenkins创建项目</h4><p><img src="http://pourfpqe4.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20190324140603.png" alt></p><p><img src="http://pourfpqe4.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20190324141633.png" alt></p><p>构建完成后的shell脚本 达到自动部署的目地</p><p><img src="http://pourfpqe4.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20190324141250.png" alt></p><h4 id="编写shell脚本"><a href="#编写shell脚本" class="headerlink" title="编写shell脚本"></a>编写shell脚本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">设置UTF-8环境</span></span><br><span class="line">set LANG=en_US.UTF-8</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8</span><br><span class="line">TOMCAT_HOME="/usr/local/tomcat/"</span><br><span class="line">TOMCAT_PORT=8080</span><br><span class="line">PROJECT="trip"</span><br><span class="line">BAK_DIR=/opt/war/bak/$PROJECT/`date +%Y%m%d`</span><br><span class="line">WORK_DIR=/var/lib/jenkins/workspace/trip/target</span><br><span class="line">service tomcat stop</span><br><span class="line">sleep 5</span><br><span class="line">mkdir -p "$&#123;BAK_DIR&#125;"</span><br><span class="line">mv "$&#123;TOMCAT_HOME&#125;"/webapps/$&#123;PROJECT&#125;.war "$&#123;BAK_DIR&#125;"/"$&#123;PROJECT&#125;"_`date +%Y%m%d%H%M%S`.war</span><br><span class="line">rm -rf "$&#123;TOMCAT_HOME&#125;"/ROOT</span><br><span class="line">rm -rf "$&#123;TOMCAT_HOME&#125;"/webapps/trip.war</span><br><span class="line">mv "$&#123;WORK_DIR&#125;"/trip-develop.war   "$&#123;TOMCAT_HOME&#125;"/webapps/trip.war</span><br><span class="line">sleep 3</span><br><span class="line">service tomcat start</span><br><span class="line">echo "tomcat 启动成功"</span><br></pre></td></tr></table></figure><p>给shell脚本赋予执行权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 /shell/ci.sh</span><br></pre></td></tr></table></figure><h4 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h4><p>shell脚本需要申明UTF-8,否则可能自动部署的项目会有乱码问题</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> 可持续集成 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx之负载均衡</title>
      <link href="/2018/12/31/Nginx%E4%B9%8B%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
      <url>/2018/12/31/Nginx%E4%B9%8B%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</url>
      
        <content type="html"><![CDATA[<h5 id="概要："><a href="#概要：" class="headerlink" title="概要："></a>概要：</h5><p>​    随着公司项目越来越大，流量也跟着越来越大，为了避免发生单点故障和系统的高性能，越来越多的网站架构都使用了负载均衡技术，这里简单记录一下Nginx负载均衡的配置方式。</p><h5 id="什么是负载均衡"><a href="#什么是负载均衡" class="headerlink" title="什么是负载均衡"></a>什么是负载均衡</h5><p>   负载均衡是由多台服务器以对称的方式组成一个服务器集合，每台服务器都具有等价的地位，都可以单独对外提供服务而无须其他服务器的辅助。通过某种负载分担技术，将外部发送来的请求均匀分配到对称结构中的某一台服务器上，而接收到请求的服务器独立地回应客户的请求。均衡负载能够平均分配客户请求到服务器列阵，籍此提供快速获取重要数据，解决大量并发访问服务问题。这种<a href="https://baike.baidu.com/item/%E7%BE%A4%E9%9B%86%E6%8A%80%E6%9C%AF" target="_blank" rel="noopener">群集技术</a>可以用最少的投资获得接近于大型主机的性能。</p>   <a id="more"></a><h5 id="Nginx配置"><a href="#Nginx配置" class="headerlink" title="Nginx配置"></a>Nginx配置</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">user  www; #使用www用户</span><br><span class="line">worker_processes  4;</span><br><span class="line"></span><br><span class="line">error_log  logs/error.log;</span><br><span class="line">error_log  logs/error.log  notice;</span><br><span class="line">error_log  logs/error.log  info;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span><br><span class="line">    #                  '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">    #                  '"$http_user_agent" "$http_x_forwarded_for"';</span><br><span class="line"></span><br><span class="line"><span class="meta">   #</span><span class="bash"> access_log  logs/access.log  main;</span></span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    #keepalive_timeout  0;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line">    </span><br><span class="line">    #负载均衡池，使用ip_hash保持会话的一致性</span><br><span class="line">     upstream jar_pool&#123;</span><br><span class="line">         ip_hash;</span><br><span class="line">         server 192.168.11.9:8080;</span><br><span class="line">         server 192.168.11.10:8080;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    #监听本地80端口</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        #location / &#123;</span><br><span class="line">        #    root   html;</span><br><span class="line">        #    index  index.html index.htm;</span><br><span class="line">        # &#125;</span><br><span class="line">      #把所有转发到后端的负载均衡池</span><br><span class="line">        location / &#123;</span><br><span class="line">        proxy_set_header Host $host:$server_port;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_pass http://jar_pool;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">       # location = /50x.html &#123;</span><br><span class="line">       #     root   html;</span><br><span class="line">       # &#125;</span><br><span class="line"></span><br><span class="line">        # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    proxy_pass   http://127.0.0.1;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    root           html;</span><br><span class="line">        #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        #    fastcgi_index  index.php;</span><br><span class="line">        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">        #    include        fastcgi_params;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # deny access to .htaccess files, if Apache's document root</span><br><span class="line">        # concurs with nginx's one</span><br><span class="line">        #</span><br><span class="line">        #location ~ /\.ht &#123;</span><br><span class="line">        #    deny  all;</span><br><span class="line">        #&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       8000;</span><br><span class="line">    #    listen       somename:8080;</span><br><span class="line">    #    server_name  somename  alias  another.alias;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # HTTPS server</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       443 ssl;</span><br><span class="line">    #    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #    ssl_certificate      cert.pem;</span><br><span class="line">    #    ssl_certificate_key  cert.key;</span><br><span class="line"></span><br><span class="line">    #    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    #    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    #    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    #    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> 负载均衡 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux系统LVM扩容</title>
      <link href="/2018/12/05/Linux%E7%B3%BB%E7%BB%9FLVM%E6%89%A9%E5%AE%B9/"/>
      <url>/2018/12/05/Linux%E7%B3%BB%E7%BB%9FLVM%E6%89%A9%E5%AE%B9/</url>
      
        <content type="html"><![CDATA[<p>摘要：</p><p>前几天客户给了生产服务器，发现分区并没有要求的那么大，后来发现有硬盘没有分好区，系统lvm扩容步骤简要记录一下</p><h5 id="查看分区列表"><a href="#查看分区列表" class="headerlink" title="查看分区列表"></a>查看分区列表</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure><h5 id="fdisk创建一个-dev-vda3分区"><a href="#fdisk创建一个-dev-vda3分区" class="headerlink" title="fdisk创建一个/dev/vda3分区"></a>fdisk创建一个/dev/vda3分区</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/vda3</span><br></pre></td></tr></table></figure><a id="more"></a><h5 id="重读分区"><a href="#重读分区" class="headerlink" title="重读分区"></a>重读分区</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">partprobe</span><br></pre></td></tr></table></figure><h5 id="格式化分区"><a href="#格式化分区" class="headerlink" title="格式化分区"></a>格式化分区</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs -t ext4 /dev/vda3</span><br></pre></td></tr></table></figure><h5 id="创建一个PV物理卷"><a href="#创建一个PV物理卷" class="headerlink" title="创建一个PV物理卷"></a>创建一个PV物理卷</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pvcreate /dev/vda3</span><br></pre></td></tr></table></figure><h5 id="把PV物理卷加入到VG逻辑卷组里"><a href="#把PV物理卷加入到VG逻辑卷组里" class="headerlink" title="把PV物理卷加入到VG逻辑卷组里"></a>把PV物理卷加入到VG逻辑卷组里</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vgextend cl /dev/vda3</span><br></pre></td></tr></table></figure><h5 id="扩展LV逻辑卷的空间"><a href="#扩展LV逻辑卷的空间" class="headerlink" title="扩展LV逻辑卷的空间"></a>扩展LV逻辑卷的空间</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lvextend -l +100%FREE /dev/mapper/cl-root</span><br></pre></td></tr></table></figure><h5 id="刷新分区大小"><a href="#刷新分区大小" class="headerlink" title="刷新分区大小"></a>刷新分区大小</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfs_growfs  /dev/mapper/cl-root</span><br></pre></td></tr></table></figure><h5 id="查看分区"><a href="#查看分区" class="headerlink" title="查看分区"></a>查看分区</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lvm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7编译安装MySql5.7</title>
      <link href="/2018/10/19/Centos7%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85MySql5-7/"/>
      <url>/2018/10/19/Centos7%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85MySql5-7/</url>
      
        <content type="html"><![CDATA[<h5 id="查看系统版本"><a href="#查看系统版本" class="headerlink" title="查看系统版本"></a>查看系统版本</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/centos-release</span><br><span class="line">CentOS Linux release 7.5.1804 (Core)</span><br></pre></td></tr></table></figure><h5 id="安装所需依赖"><a href="#安装所需依赖" class="headerlink" title="安装所需依赖"></a>安装所需依赖</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc cmake make gcc-c++ ncurses-devel openssl-devel bison ncurses chkconfig lsof</span><br></pre></td></tr></table></figure><a id="more"></a><h5 id="卸载系统自带Mariadb及删除遗留的配置文件"><a href="#卸载系统自带Mariadb及删除遗留的配置文件" class="headerlink" title="卸载系统自带Mariadb及删除遗留的配置文件"></a>卸载系统自带Mariadb及删除遗留的配置文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#查看centos 默认安装的mariadb </span></span><br><span class="line">[root@VM_0_15_centos ~]<span class="comment"># rpm -qa | grep mariadb</span></span><br><span class="line">mariadb-libs-5.5.56-2.el7.x86_64</span><br><span class="line"><span class="comment"># 强制卸载mariadb</span></span><br><span class="line">rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64</span><br><span class="line"><span class="comment">#删除对应的mariadb配置文件</span></span><br><span class="line">rm -rf /etc/my.cnf</span><br></pre></td></tr></table></figure><h5 id="下载MySql文件"><a href="#下载MySql文件" class="headerlink" title="下载MySql文件"></a>下载MySql文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#进入到/usr/local/src</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src</span><br><span class="line"><span class="comment">#下载文件（因mysql5.7之后必须要安装boost库，所以这里直接下载带boost的mysql源码）</span></span><br><span class="line">wget https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-boost-5.7.23.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#下载成功</span></span><br><span class="line">wget https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-boost-5.7.23.tar.gz</span><br><span class="line">--2018-10-19 22:46:26--  https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-boost-5.7.23.tar.gz</span><br><span class="line">Resolving cdn.mysql.com (cdn.mysql.com)... 23.56.25.233</span><br><span class="line">Connecting to cdn.mysql.com (cdn.mysql.com)|23.56.25.233|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 49025014 (47M) [application/x-tar-gz]</span><br><span class="line">Saving to: ‘mysql-boost-5.7.23.tar.gz’</span><br><span class="line"></span><br><span class="line">100%[==============================================================================================&gt;] 49,025,014   523KB/s   <span class="keyword">in</span> 64s    </span><br><span class="line"></span><br><span class="line">2018-10-19 22:47:47 (747 KB/s) - ‘mysql-boost-5.7.23.tar.gz’ saved [49025014/49025014]</span><br><span class="line"></span><br><span class="line"><span class="comment">#解压文件</span></span><br><span class="line">tar zxvf mysql-boost-5.7.23.tar.gz</span><br><span class="line"><span class="comment">#进入目录</span></span><br><span class="line"><span class="built_in">cd</span> mysql-5.7.23</span><br><span class="line"><span class="comment">#编译参数</span></span><br><span class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr/<span class="built_in">local</span>/mysql -DMYSQL_DATADIR=/usr/<span class="built_in">local</span>/mysql/data -DSYSCONFDIR=/etc -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DWITH_ARCHIVE_STORAGE_ENGINE=1 -DWITH_MEMORY_STORAGE_ENGINE=1 -DWITH_READLINE=1 -DMYSQL_UNIX_ADDR=/usr/<span class="built_in">local</span>/mysql/mysql.sock -DMYSQL_TCP_PORT=3306 -DENABLED_LOCAL_INFILE=1 -DENABLE_DOWNLOADS=1 -DWITH_PARTITION_STORAGE_ENGINE=1 -DEXTRA_CHARSETS=all -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DWITH_DEBUG=0 -DMYSQL_MAINTAINER_MODE=0 -DWITH_SSL:STRING=bundled -DWITH_ZLIB:STRING=bundled -DWITH_BOOST=boost</span><br><span class="line"></span><br><span class="line"><span class="comment">#初始化完成</span></span><br><span class="line"></span><br><span class="line">-- CMAKE_BUILD_TYPE: RelWithDebInfo</span><br><span class="line">-- COMPILE_DEFINITIONS: _GNU_SOURCE;_FILE_OFFSET_BITS=64;HAVE_CONFIG_H;HAVE_LIBEVENT1</span><br><span class="line">-- CMAKE_C_FLAGS:  -Wall -Wextra -Wformat-security -Wvla -Wwrite-strings -Wdeclaration-after-statement</span><br><span class="line">-- CMAKE_CXX_FLAGS:  -Wall -Wextra -Wformat-security -Wvla -Woverloaded-virtual -Wno-unused-parameter</span><br><span class="line">-- CMAKE_C_LINK_FLAGS: </span><br><span class="line">-- CMAKE_CXX_LINK_FLAGS: </span><br><span class="line">-- CMAKE_C_FLAGS_RELWITHDEBINFO: -O3 -g -fabi-version=2 -fno-omit-frame-pointer -fno-strict-aliasing -DDBUG_OFF</span><br><span class="line">-- CMAKE_CXX_FLAGS_RELWITHDEBINFO: -O3 -g -fabi-version=2 -fno-omit-frame-pointer -fno-strict-aliasing -DDBUG_OFF</span><br><span class="line">-- Configuring <span class="keyword">done</span></span><br><span class="line">-- Generating <span class="keyword">done</span></span><br><span class="line">-- Build files have been written to: /usr/<span class="built_in">local</span>/src/mysql-5.7.23</span><br></pre></td></tr></table></figure><h5 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h5 id="添加mysql用户和用户组"><a href="#添加mysql用户和用户组" class="headerlink" title="添加mysql用户和用户组"></a>添加mysql用户和用户组</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd mysql -g mysql -M -s /sbin/nologin</span><br></pre></td></tr></table></figure><h5 id="给mysql用户授权mysql-文件夹"><a href="#给mysql用户授权mysql-文件夹" class="headerlink" title="给mysql用户授权mysql 文件夹"></a>给mysql用户授权mysql 文件夹</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R mysql:mysql /usr/<span class="built_in">local</span>/mysql/</span><br></pre></td></tr></table></figure><h5 id="拷贝启动文件"><a href="#拷贝启动文件" class="headerlink" title="拷贝启动文件"></a>拷贝启动文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/<span class="built_in">local</span>/mysql/support-files/mysql.server /etc/init.d/</span><br></pre></td></tr></table></figure><h5 id="初始化数据库"><a href="#初始化数据库" class="headerlink" title="初始化数据库"></a>初始化数据库</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用-initialize会生成随机密码，使用-initialize-insecure生成空密码，这里选择生成空密码。</span></span><br><span class="line">/usr/<span class="built_in">local</span>/mysql/bin/mysqld --initialize-insecure --user=mysql</span><br></pre></td></tr></table></figure><h5 id="启动MySql"><a href="#启动MySql" class="headerlink" title="启动MySql"></a>启动MySql</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">启动MySql</span></span><br><span class="line">/etc/init.d/mysql.server start</span><br><span class="line">Starting MySQL.Logging to '/usr/local/mysql/data/VM_0_15_centos.err'.</span><br><span class="line">SUCCESS!</span><br></pre></td></tr></table></figure><h5 id="添加至环境变量"><a href="#添加至环境变量" class="headerlink" title="添加至环境变量"></a>添加至环境变量</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">使其永久生效，把安装目录添加至环境变量</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="bash">文件最后一行添加进去</span></span><br><span class="line">export PATH=$PATH:/usr/local/mysql/bin</span><br><span class="line"><span class="meta">#</span><span class="bash">马上生效</span></span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><h5 id="登陆mysql"><a href="#登陆mysql" class="headerlink" title="登陆mysql"></a>登陆mysql</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure><h5 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看数据库</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> show databases;</span></span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"><span class="meta">#</span><span class="bash">修改root密码为123456</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> <span class="built_in">set</span> password <span class="keyword">for</span> root@localhost = password(<span class="string">'123456'</span>);</span></span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"><span class="meta">#</span><span class="bash">退出mysql，重新登陆生效</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> <span class="built_in">exit</span></span></span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><p>注意事项：</p><p>​                MySql5.7.18之后版本不再提供my.cnf 配置文件</p><p>​           </p>]]></content>
      
      
      <categories>
          
          <category> MySql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx配置https</title>
      <link href="/2018/09/24/Nginx%E9%85%8D%E7%BD%AEhttps/"/>
      <url>/2018/09/24/Nginx%E9%85%8D%E7%BD%AEhttps/</url>
      
        <content type="html"><![CDATA[<h5 id="Https简介"><a href="#Https简介" class="headerlink" title="Https简介"></a>Https简介</h5><p>  HTTPS（全称：Hyper Text Transfer Protocol over Secure Socket Layer），是以安全为目标的<a href="https://baike.baidu.com/item/HTTP" target="_blank" rel="noopener">HTTP</a>通道，简单讲是HTTP的安全版。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。 它是一个URI scheme（抽象标识符体系），句法类同<a href="https://baike.baidu.com/item/http" target="_blank" rel="noopener">http</a>:体系。用于安全的HTTP数据传输。https:URL表明它使用了HTTP，但HTTPS存在不同于HTTP的默认<a href="https://baike.baidu.com/item/%E7%AB%AF%E5%8F%A3/103505" target="_blank" rel="noopener">端口</a>及一个加密/身份验证层（在HTTP与TCP之间）。这个系统的最初研发由<a href="https://baike.baidu.com/item/%E7%BD%91%E6%99%AF" target="_blank" rel="noopener">网景</a>公司(Netscape)进行，并内置于其浏览器Netscape Navigator中，提供了身份验证与加密<a href="https://baike.baidu.com/item/%E9%80%9A%E8%AE%AF/396194" target="_blank" rel="noopener">通讯</a>方法。</p><h5 id="购买或申请证书"><a href="#购买或申请证书" class="headerlink" title="购买或申请证书"></a>购买或申请证书</h5><p>  有免费1年的单域名证书 也有多域名的，自己去云服务商购买</p><p>把申请完的证书下载，然后传到对应服务器的任意位置，建议在nginx的安装目录下，新建一个文件夹 ,记录下文件路径。<br><a id="more"></a></p><h5 id="Nginx-https配置"><a href="#Nginx-https配置" class="headerlink" title="Nginx https配置"></a>Nginx https配置</h5><p>找到对应的nginx  站点配置文件（我这里为单独的虚拟主机站点）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name   heibi.site;</span><br><span class="line">        root   /www/heibai;</span><br><span class="line">       index  test.html index.php index.html index.htm;</span><br><span class="line">        charset      utf-8;</span><br><span class="line">       access_log  /data/logs/gwaccess.log main;</span><br><span class="line">       error_log   /data/logs/gwerror.log error;</span><br></pre></td></tr></table></figure><p>添加一段nginx配置https的文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">        listen       <span class="number">80</span>;</span><br><span class="line">        server_name   heibai.site;</span><br><span class="line">       <span class="comment"># root   /www/heibai;</span></span><br><span class="line">       <span class="comment"># index  test.html index.php index.html index.htm;</span></span><br><span class="line">        charset      utf<span class="number">-8</span>;</span><br><span class="line">       access_log  /data/logs/gwaccess.log main;</span><br><span class="line">       error_log   /data/logs/gwerror.log error;</span><br><span class="line">       rewrite ^/(.*) https://heibai.site/$<span class="number">1</span> permanent;</span><br><span class="line">      &#125; <span class="comment">#80端口转发到443，访问网站直接跳转到https</span></span><br><span class="line">     </span><br><span class="line">server &#123;</span><br><span class="line">   listen       <span class="number">443</span>;<span class="comment">#端口</span></span><br><span class="line">    server_name heibai.site;<span class="comment">#域名</span></span><br><span class="line">    ssl on;<span class="comment">#开启ssl</span></span><br><span class="line">    root   /www/mx_admin;<span class="comment">#站点根目录</span></span><br><span class="line">    index  test.html index.php index.html index.htm;</span><br><span class="line">    ssl_certificate   /data/ssl/<span class="number">215009961500297.</span>pem;</span><br><span class="line">    ssl_certificate_key /data/ssl/<span class="number">215009961500297.</span>key;</span><br><span class="line">    ssl_session_timeout <span class="number">5</span>m;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1<span class="number">.1</span> TLSv1<span class="number">.2</span>;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br></pre></td></tr></table></figure><p>修改完成，检查nginx语法是否有问题用</p><p>/usr/local/nginx/sbin/nginx -t</p><h5 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h5><p>1.防火墙443端口和80端口一定要打开</p><p>2.配置443端口 要把80端口的网站根目录注释掉，不然配置好了就是nginx默认页面</p><p>3.Nginx需要开启ssl模块</p>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySql保留最近5天备份</title>
      <link href="/2018/09/16/MySql%E4%BF%9D%E7%95%99%E6%9C%80%E8%BF%915%E5%A4%A9%E5%A4%87%E4%BB%BD/"/>
      <url>/2018/09/16/MySql%E4%BF%9D%E7%95%99%E6%9C%80%E8%BF%915%E5%A4%A9%E5%A4%87%E4%BB%BD/</url>
      
        <content type="html"><![CDATA[<h4 id="进入备份目录"><a href="#进入备份目录" class="headerlink" title="进入备份目录"></a>进入备份目录</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /mysqlbackup</span><br></pre></td></tr></table></figure><h4 id="编写shell脚本"><a href="#编写shell脚本" class="headerlink" title="编写shell脚本"></a>编写shell脚本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi clean.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">find /mysqlbackup  -mtime +4  -name "*.sql" -exec rm -rf &#123;&#125; \;</span><br></pre></td></tr></table></figure><a id="more"></a><p>删除该目录下5天以前的以sql后缀结尾的文件</p><h4 id="添加执行权限"><a href="#添加执行权限" class="headerlink" title="添加执行权限"></a>添加执行权限</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 clean.sh</span><br></pre></td></tr></table></figure><h4 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a>定时任务</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line">0 6 * * * /backup.sh</span><br></pre></td></tr></table></figure><p>每天凌晨6点执行一次</p>]]></content>
      
      
      <categories>
          
          <category> MySql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySql数据库每天定时自动备份</title>
      <link href="/2018/09/16/MySql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AF%8F%E5%A4%A9%E5%AE%9A%E6%97%B6%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD/"/>
      <url>/2018/09/16/MySql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AF%8F%E5%A4%A9%E5%AE%9A%E6%97%B6%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD/</url>
      
        <content type="html"><![CDATA[<h4 id="创建备份目录"><a href="#创建备份目录" class="headerlink" title="创建备份目录"></a>创建备份目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mysqlbackup</span><br><span class="line"><span class="built_in">cd</span> /mysqlbackup</span><br></pre></td></tr></table></figure><h4 id="编写shell脚本"><a href="#编写shell脚本" class="headerlink" title="编写shell脚本"></a>编写shell脚本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vi backup.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">date=$(date +"%Y-%m-%d")</span><br><span class="line">database=base</span><br><span class="line">passwd=password</span><br><span class="line">user=root</span><br><span class="line">tool=usr/local/mysql/bin/mysqldump</span><br><span class="line"><span class="meta">$</span><span class="bash">tool -u<span class="variable">$user</span> -p<span class="variable">$passwd</span> <span class="variable">$database</span> &gt;/mysqlbackup/<span class="variable">$date</span>-<span class="variable">$database</span>.sql;</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>注意：</p><p>1.mysqldump路径需要写绝对路径，直接执行命令，备份能够成功，但是脚本里面不写绝对路径，备份出来的会是空文件；</p><p>2.username替换为用户名，一般为root；</p><p>3.password为密码；</p><p>4.databasename为要备份的数据库名称。</p><h4 id="添加执行权限"><a href="#添加执行权限" class="headerlink" title="添加执行权限"></a>添加执行权限</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 backup.sh</span><br></pre></td></tr></table></figure><h4 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a>定时任务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line">0 5 * * * /backup.sh</span><br></pre></td></tr></table></figure><p>表示每天凌晨5点自动执行这个脚本，完成备份。</p>]]></content>
      
      
      <categories>
          
          <category> MySql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>同步Android源码清除缓存</title>
      <link href="/2018/04/14/%E5%90%8C%E6%AD%A5Android%E6%BA%90%E7%A0%81%E6%B8%85%E9%99%A4%E7%BC%93%E5%AD%98/"/>
      <url>/2018/04/14/%E5%90%8C%E6%AD%A5Android%E6%BA%90%E7%A0%81%E6%B8%85%E9%99%A4%E7%BC%93%E5%AD%98/</url>
      
        <content type="html"><![CDATA[<h4 id="同步Android源码清除缓存："><a href="#同步Android源码清除缓存：" class="headerlink" title="同步Android源码清除缓存："></a>同步Android源码清除缓存：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find .repo/ -name <span class="string">"*tmp_pack*"</span> | xargs rm -rvf</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows 修改远程端口号</title>
      <link href="/2018/04/14/Windows-%E4%BF%AE%E6%94%B9%E8%BF%9C%E7%A8%8B%E7%AB%AF%E5%8F%A3%E5%8F%B7/"/>
      <url>/2018/04/14/Windows-%E4%BF%AE%E6%94%B9%E8%BF%9C%E7%A8%8B%E7%AB%AF%E5%8F%A3%E5%8F%B7/</url>
      
        <content type="html"><![CDATA[<h4 id="Win-R-运行regedit-注册表"><a href="#Win-R-运行regedit-注册表" class="headerlink" title="Win+R 运行regedit(注册表)"></a>Win+R 运行regedit(注册表)</h4><p>点击HKEY_LOCAL_MACHINE/SYSTEM/CurrentConrtolset/Control/Terminal Server/Wds/rdpwd/Tds/tcp portNumber(远程端口号，默认3389)</p>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux防火墙</title>
      <link href="/2018/04/14/Linux%E9%98%B2%E7%81%AB%E5%A2%99/"/>
      <url>/2018/04/14/Linux%E9%98%B2%E7%81%AB%E5%A2%99/</url>
      
        <content type="html"><![CDATA[<h4 id="centos7"><a href="#centos7" class="headerlink" title="centos7"></a>centos7</h4><h4 id="通过防火墙"><a href="#通过防火墙" class="headerlink" title="通过防火墙"></a>通过防火墙</h4><p>80端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br></pre></td></tr></table></figure><p>443端口<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=443/tcp --permanent</span><br></pre></td></tr></table></figure></p><a id="more"></a><h4 id="重启防火墙"><a href="#重启防火墙" class="headerlink" title="重启防火墙"></a>重启防火墙</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service</span><br></pre></td></tr></table></figure><h4 id="centos6"><a href="#centos6" class="headerlink" title="centos6"></a>centos6</h4><p>查询防火墙状态:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service   iptables status</span><br></pre></td></tr></table></figure><p>停止防火墙:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service   iptables stop</span><br></pre></td></tr></table></figure></p><p>启动防火墙:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service   iptables start</span><br></pre></td></tr></table></figure></p><p>重启防火墙:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service   iptables restart</span><br></pre></td></tr></table></figure></p><p>永久关闭防火墙:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig   iptables off</span><br></pre></td></tr></table></figure></p><p>永久关闭后启用:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig   iptables on</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World!</title>
      <link href="/2018/04/11/Hello-World-0/"/>
      <url>/2018/04/11/Hello-World-0/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
